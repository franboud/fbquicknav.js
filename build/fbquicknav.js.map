{"version":3,"sources":["../src/fbquicknav.js"],"names":["FBQuickNav","selector","options","quicknavEl","document","querySelector","settings","section_class","section_title","section_class_hide","scroll_offset","add_trigger","trigger_after_items","trigger_icon_open","trigger_icon_close","Object","assign","init","sectionsEl","querySelectorAll","build_html","click_items_events","scroll_activate_items","open_close_trigger","close_on_scroll","hide_quicknav","classList","add","itemsCheck","quicknavInEl","createElement","itemsEl","forEach","sectionEl","index","title","getAttribute","itemEl","href","spanEl","textContent","setAttribute","appendChild","buttonEl","type","buttonLabel","buttonIcons","buttonIconOpen","innerHTML","buttonIconClose","insertBefore","firstChild","linksEL","set_trigger_label","addEventListener","evt","linkEl","target","closest","preventDefault","section_index","find_section_by_index","go_to_section","sectionIndex","find_link_by_index","ScrollTrigger","create","trigger","start","end","onEnter","onLeave","remove","onEnterBack","onLeaveBack","triggerEl","contains","close_quicknav","open_quicknav","window","_","throttle","hideHereEl","toggleClass","targets","className","endTrigger","sectionName","triggerLabelEl","searchIndex","sectionFound","linkFound","y","getBoundingClientRect","top","pageYOffset","scrollTo","behavior"],"mappings":"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","sourcesContent":["/**\n * Quick Nav plugin.\n * Version 2.0\n *\n * Required:\n *    - LoDash _.throttle\n *\t  - GSAP with ScrollTrigger\n *\n * Pour activer :\n *\t  new FBQuickNav('.jsQuicknav');\n *    const quickNav = new FBQuickNav('.jsQuicknav');\n *    const quickNav = new FBQuickNav('.jsQuicknav', { options });\n *\n * Options configurables :\n *    - section_class --> Class name of the sections added in the quick nav.\n *    - section_title --> Data attribute for the title of the section, displayed in the quick nav.\n *    - section_class_hide --> When the quicknav reaches this section, hide it.\n *    - scroll_offset --> Offset when scrolling to a section.\n *    - add_trigger --> Add a button to open and close the quicknav.\n *    - trigger_after_items --> Position of the trigger HTML: before or after the items.\n *    - trigger_icon_open --> SVG of the icon of the trigger to show the items.\n *    - trigger_icon_close --> SVG of the icon of the trigger to hide the items.\n */\n\nclass FBQuickNav {\n\tconstructor(selector, options) {\n\t\tthis.selector = selector;\n\t\tthis.quicknavEl = document.querySelector(this.selector);\n\n\t\t// Try to init\n\t\tif (this.quicknavEl == null || typeof this.quicknavEl === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\n\t\t// Default settings\n\t\tthis.settings = {\n\t\t\tsection_class: \".jsQuickNav__section\",\n\t\t\tsection_title: \"data-quicknav-title\",\n\t\t\tsection_class_hide: \".jsQuickNav__hide\",\n\t\t\tscroll_offset: -100,\n\t\t\tadd_trigger: false,\n\t\t\ttrigger_after_items: false,\n\t\t\ttrigger_icon_open: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path d=\"M50 79.53L2.5 32.03l11.56-11.56L50 56.41l35.94-35.94L97.5 32.03z\"/></svg>',\n\t\t\ttrigger_icon_close: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path d=\"M1.004 89.605l88.6-88.6 9.397 9.397-88.6 88.6z\"/><path d=\"M1.004 10.394L10.402.997l88.6 88.6-9.398 9.397z\"/></svg>',\n\t\t}\n\n\t\t// Merge options in the settings\n\t\tthis.settings = Object.assign(this.settings, options);\n\n\t\t// Init this plugin\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tthis.sectionsEl = document.querySelectorAll(this.settings.section_class + '[' + this.settings.section_title + ']'); // Seulement les sections qui ont un titre defined.\n\n\t\tthis.build_html();\n\t\tthis.click_items_events();\n\t\tthis.scroll_activate_items();\n\t\tthis.open_close_trigger();\n\t\tthis.close_on_scroll();\n\t\tthis.hide_quicknav();\n\n\t\t// Tout est fait, init quicknav\n\t\tthis.quicknavEl.classList.add(\"isInit\");\n\t}\n\n\n\t/**\n\t * Creates the HTML and add it to the DOM.\n\t */\n\tbuild_html() {\n\n\t\t/**\n\t\t * CHECK\n\t\t * Check if the HTML was harcoded, if yes : don't create it again.\n\t\t */\n\t\tconst itemsCheck = this.quicknavEl.querySelector('.quickNav__items');\n\t\tif (typeof (itemsCheck) != 'undefined' && itemsCheck != null) {\n\t\t\treturn;\n\t\t}\n\n\n\t\t/**\n\t\t * WRAP\n\t\t * Wrap everything in a __in div.\n\t\t */\n\t\tlet quicknavInEl = document.createElement(\"div\");\n\t\tquicknavInEl.classList.add(\"quickNav__in\");\n\n\n\t\t/**\n\t\t * ADD ITEMS\n\t\t * Add all the items in the quicknav.\n\t\t */\n\t\tlet itemsEl = document.createElement(\"div\");\n\t\titemsEl.classList.add('quickNav__items', 'jsQuickNav__ctn');\n\n\t\tthis.sectionsEl.forEach((sectionEl, index) => {\n\t\t\tconst title = sectionEl.getAttribute(this.settings.section_title);\n\n\t\t\t// <a>\n\t\t\tlet itemEl = document.createElement(\"a\");\n\t\t\titemEl.classList.add(\"quickNav__item\");\n\t\t\titemEl.href = \"#\";\n\n\t\t\t// <span> inside of the <a>\n\t\t\tlet spanEl = document.createElement(\"span\");\n\t\t\tspanEl.classList.add(\"quickNav__text\");\n\t\t\tspanEl.textContent = title;\n\n\t\t\t// Link the item to the section, for easy access later\n\t\t\titemEl.setAttribute(\"data-quicknav-index\", index);\n\t\t\tsectionEl.setAttribute(\"data-quicknav-index\", index);\n\n\t\t\titemEl.appendChild(spanEl);\n\t\t\titemsEl.appendChild(itemEl);\n\t\t});\n\n\t\tquicknavInEl.appendChild(itemsEl);\n\n\n\t\t/**\n\t\t * TRIGGER\n\t\t * Trigger to open / close quicknav\n\t\t */\n\t\tif (this.settings.add_trigger === true) {\n\t\t\tlet buttonEl = document.createElement(\"button\");\n\t\t\tbuttonEl.type = \"button\";\n\t\t\tbuttonEl.classList.add(\"quickNav__trigger\", \"jsQuickNav__trigger\");\n\n\t\t\tlet buttonLabel = document.createElement(\"span\");\n\t\t\tbuttonLabel.classList.add(\"quickNav__triggerLabel\", \"jsQuickNav__triggerLabel\");\n\n\t\t\tlet buttonIcons = document.createElement(\"span\");\n\t\t\tbuttonIcons.classList.add(\"quickNav__triggerIcon\");\n\n\t\t\tlet buttonIconOpen = document.createElement(\"span\");\n\t\t\tbuttonIconOpen.classList.add(\"svgIcon\", \"quickNav__triggerOpen\");\n\t\t\tbuttonIconOpen.innerHTML = this.settings.trigger_icon_open;\n\n\t\t\tlet buttonIconClose = document.createElement(\"span\");\n\t\t\tbuttonIconClose.classList.add(\"svgIcon\", \"quickNav__triggerClose\");\n\t\t\tbuttonIconClose.innerHTML = this.settings.trigger_icon_close;\n\n\t\t\tbuttonIcons.appendChild(buttonIconOpen);\n\t\t\tbuttonIcons.appendChild(buttonIconClose);\n\t\t\tbuttonEl.appendChild(buttonLabel);\n\t\t\tbuttonEl.appendChild(buttonIcons);\n\n\t\t\t// Avant ou apres la liste d'items\n\t\t\tif (this.settings.trigger_after_items) {\n\t\t\t\tquicknavInEl.appendChild(buttonEl);\n\t\t\t} else {\n\t\t\t\tquicknavInEl.insertBefore(buttonEl, quicknavInEl.firstChild);\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t * ADD TO DOM\n\t\t * Add all those elements to the quicknav.\n\t\t */\n\t\tthis.quicknavEl.appendChild(quicknavInEl);\n\n\n\t\t/**\n\t\t * VAR REFERENCE\n\t\t * For easy access later on...\n\t\t */\n\t\tthis.linksEL = this.quicknavEl.querySelectorAll(\"a\");\n\n\n\t\t/**\n\t\t * DEFAULT LABEL\n\t\t * On met le nom de la premiere section dans le trigger label.\n\t\t */\n\n\t\tthis.set_trigger_label(this.sectionsEl[0]);\n\t}\n\n\n\t/**\n\t * Click on the quicknav link.\n\t * When there's a click, the page scrolls to the chosen section.\n\t */\n\tclick_items_events() {\n\t\tthis.quicknavEl.addEventListener(\"click\", (evt) => {\n\t\t\t// On cible seulement les liens <a>\n\t\t\t// ATTENTION! closest bubbles up jusqu'au document.\n\t\t\tconst linkEl = evt.target.closest(\"a.quickNav__item\");\n\t\t\tif (!linkEl) { return };\n\t\t\tevt.preventDefault();\n\n\n\t\t\tconst section_index = linkEl.getAttribute(\"data-quicknav-index\");\n\t\t\tconst sectionEl = this.find_section_by_index(section_index);\n\n\t\t\tif (sectionEl != null) {\n\t\t\t\tthis.go_to_section(sectionEl);\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/**\n\t * Gerer l'activation automatique des classes \"active\" sur les items.\n\t * Quand le user scroll, on indique sur quelle section on se trouve.\n\t */\n\tscroll_activate_items() {\n\t\tthis.sectionsEl.forEach((sectionEl) => {\n\t\t\tconst\n\t\t\t\tsectionIndex = sectionEl.getAttribute(\"data-quicknav-index\"),\n\t\t\t\tlinkEl = this.find_link_by_index(sectionIndex);\n\n\n\t\t\tScrollTrigger.create({\n\t\t\t\ttrigger: sectionEl,\n\n\t\t\t\t// Describes a place on the trigger and a place on the scroller \n\t\t\t\t// that must meet in order to start the ScrollTrigger.\n\t\t\t\t// Example:\n\t\t\t\t// \"top center\" = \"when the top of the trigger hits the center of the scroller\"\n\t\t\t\t// \"bottom 80%\" = \"when the bottom of the trigger hits 80% down from the top of the viewport\" \n\t\t\t\tstart: \"top center\",\n\t\t\t\tend: \"bottom center\",\n\n\t\t\t\t// Gestion custom des events\n\t\t\t\tonEnter: () => {\n\t\t\t\t\tlinkEl.classList.add(\"active\");\n\t\t\t\t\tthis.set_trigger_label(sectionEl);\n\t\t\t\t},\n\t\t\t\tonLeave: () => {\n\t\t\t\t\tlinkEl.classList.remove(\"active\")\n\t\t\t\t},\n\t\t\t\tonEnterBack: () => {\n\t\t\t\t\tlinkEl.classList.add(\"active\")\n\t\t\t\t\tthis.set_trigger_label(sectionEl);\n\t\t\t\t},\n\t\t\t\tonLeaveBack: () => {\n\t\t\t\t\tlinkEl.classList.remove(\"active\")\n\t\t\t\t},\n\n\t\t\t\t// markers: true,\n\t\t\t\t// id: \"section \" + sectionIndex,\n\t\t\t});\n\t\t});\n\t}\n\n\n\t/**\n\t * Click on the trigger button.\n\t * Open and close the quicknav.\n\t */\n\topen_close_trigger() {\n\t\tif (this.settings.add_trigger !== true) { return; }\n\n\t\tconst triggerEl = this.quicknavEl.querySelector(\".jsQuickNav__trigger\");\n\n\t\ttriggerEl.addEventListener(\"click\", (evt) => {\n\t\t\tevt.preventDefault();\n\n\t\t\tif (this.quicknavEl.classList.contains(\"open\")) {\n\t\t\t\tthis.close_quicknav();\n\t\t\t} else {\n\t\t\t\tthis.open_quicknav();\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/**\n\t * Close the quicknav on scroll\n\t */\n\tclose_on_scroll() {\n\t\tif (this.settings.add_trigger !== true) { return; }\n\n\t\twindow.addEventListener('scroll', _.throttle(() => {\n\t\t\tif (this.quicknavEl.classList.contains(\"open\")) {\n\t\t\t\tthis.close_quicknav();\n\t\t\t}\n\t\t}, 300));\n\t}\n\n\n\t/**\n\t * Hide the quicknav\n\t * When the window reach a section, hide the quicknav.\n\t * Usually, this section is the footer.\n\t */\n\thide_quicknav() {\n\t\tconst hideHereEl = document.querySelector(this.settings.section_class_hide);\n\t\tif (!hideHereEl) { return; }\n\n\n\t\tScrollTrigger.create({\n\t\t\ttrigger: hideHereEl,\n\t\t\ttoggleClass: { targets: this.quicknavEl, className: \"quickNav--hide\" },\n\n\t\t\t// Describes a place on the trigger and a place on the scroller \n\t\t\t// that must meet in order to start the ScrollTrigger.\n\t\t\t// Example:\n\t\t\t// \"top center\" = \"when the top of the trigger hits the center of the scroller\"\n\t\t\t// \"bottom 80%\" = \"when the bottom of the trigger hits 80% down from the top of the viewport\" \n\t\t\tstart: \"top 25%\",\n\n\t\t\t// Ce code permet de ne pas avoir de fin au ScrollTrigger\n\t\t\tendTrigger: \"html\",\n\t\t\tend: \"bottom top\",\n\n\t\t\t// markers: true,\n\t\t\t// id: \"hide quicknav\",\n\t\t});\n\t}\n\n\n\t/**\n\t * Update the trigger label\n\t * Mettre le nom de la section active dans le trigger button.\n\t */\n\tset_trigger_label(sectionEl) {\n\t\tif (this.settings.add_trigger !== true) { return; }\n\n\t\tconst\n\t\t\tsectionName = sectionEl.getAttribute(\"data-quicknav-title\"),\n\t\t\ttriggerLabelEl = this.quicknavEl.querySelector(\".jsQuickNav__triggerLabel\");\n\n\t\ttriggerLabelEl.textContent = sectionName;\n\t}\n\n\n\t/**\n\t * Open the quicknav\n\t */\n\topen_quicknav() {\n\t\tthis.quicknavEl.classList.add('open');\n\t}\n\n\n\t/**\n\t * Close the quicknav\n\t */\n\tclose_quicknav() {\n\t\tthis.quicknavEl.classList.remove('open');\n\t}\n\n\n\t/**\n\t * Trouver une section par index de section (data-quicknav-index).\n\t */\n\tfind_section_by_index(searchIndex) {\n\t\tlet sectionFound = null;\n\n\t\tthis.sectionsEl.forEach((sectionEl) => {\n\t\t\tconst sectionIndex = sectionEl.getAttribute(\"data-quicknav-index\");\n\n\t\t\tif (sectionIndex == searchIndex) {\n\t\t\t\tsectionFound = sectionEl;\n\t\t\t}\n\t\t});\n\n\t\treturn sectionFound;\n\t}\n\n\n\t/**\n\t * Trouver un lien par index de section (data-quicknav-index).\n\t */\n\tfind_link_by_index(searchIndex) {\n\t\tlet linkFound = null;\n\n\t\tthis.linksEL.forEach((linkEl) => {\n\t\t\tconst sectionIndex = linkEl.getAttribute(\"data-quicknav-index\");\n\n\t\t\tif (sectionIndex == searchIndex) {\n\t\t\t\tlinkFound = linkEl;\n\t\t\t}\n\t\t});\n\n\t\treturn linkFound;\n\t}\n\n\n\t/**\n\t * Scroll to section\n\t * Centralise le code qui permet de scroller vers une section.\n\t */\n\tgo_to_section(sectionEl) {\n\t\tconst y = sectionEl.getBoundingClientRect().top + window.pageYOffset + this.settings.scroll_offset;\n\t\twindow.scrollTo({ top: y, behavior: 'smooth' });\n\n\t\t// Un jour, utiliser ceci?\n\t\t// sectionEl.scrollIntoView({\n\t\t// \tbehavior: 'smooth', // Defines the transition animation. default: auto\n\t\t// \tblock: 'center', // Defines vertical alignment. default: start\n\t\t// \tinline: 'nearest' // Defines horizontal alignment. default: nearest\n\t\t// });\n\t}\n}"],"file":"fbquicknav.js"}