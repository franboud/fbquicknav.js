{"version":3,"sources":["../src/fbquicknav.js"],"names":["FBQuickNav","selector","quicknavEl","document","querySelector","settings","section_class","section_title","section_class_hide","scroll_offset","add_trigger","trigger_after_items","trigger_icon_open","trigger_icon_close","init","sectionsEl","querySelectorAll","build_html","click_on_quicknav_event","toggle_quicknav_classes","click_on_trigger_event","close_on_scroll","toggle_hide_quicknav","classList","add","itemsCheck","quicknavInEl","createElement","itemsEl","forEach","sectionEl","index","title","getAttribute","itemEl","href","spanEl","textContent","setAttribute","appendChild","buttonEl","type","buttonLabel","buttonIcons","buttonIconOpen","innerHTML","buttonIconClose","insertBefore","firstChild","linksEL","set_trigger_label","triggerEl","addEventListener","evt","preventDefault","contains","close_quicknav","open_quicknav","sectionName","triggerLabelEl","window","_","throttle","remove","linkEl","target","closest","section_index","find_section_by_index","go_to_section","searchIndex","sectionFound","sectionIndex","linkFound","y","getBoundingClientRect","top","pageYOffset","scrollTo","behavior","find_link_by_index","ScrollTrigger","create","trigger","start","end","onEnter","onLeave","onEnterBack","onLeaveBack","hideHereEl","toggleClass","targets","className","endTrigger"],"mappings":"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","sourcesContent":["/**\n * Quick Nav plugin.\n * Version 2.2\n *\n * Required:\n *    - LoDash _.debounce et _.throttle\n *\n * Pour activer :\n *\t  new FBQuickNav('.jsQuicknav');\n *    const quickNav = new FBQuickNav('.jsQuicknav');\n *\n * Options configurables :\n *    - section_class --> .jsQuickNav__section --> Sections added in the quick nav.\n *    - section_title --> data-quicknav-title --> Data attribute for the title of the section, displayed in the quick nav.\n *    - section_class_hide --> .jsQuickNav__hide --> When the quicknav reaches this section, hide it.\n *    - scroll_offset --> -100 (px) --> Offset of the scroll when we click on a quick nav link.\n *    - add_trigger --> false | true --> Add a button to open and close the quicknav.\n *    - trigger_after_items --> false | true --> Position of the trigger: before or after the items.\n *    - trigger_icon_open --> SVG --> SVG of the icon of the trigger to show the items.\n *    - trigger_icon_close --> SVG --> SVG of the icon of the trigger to hide the items.\n */\n\nclass FBQuickNav {\n\tconstructor(selector) {\n\t\tthis.selector = selector;\n\t\tthis.quicknavEl = document.querySelector(this.selector);\n\n\t\t// Try to init\n\t\tif (this.quicknavEl == null || typeof this.quicknavEl === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\n\n\t\tthis.settings = {\n\t\t\tsection_class: \".jsQuickNav__section\",\n\t\t\tsection_title: \"data-quicknav-title\",\n\t\t\tsection_class_hide: \".footer\",\n\t\t\tscroll_offset: -120,\n\t\t\tadd_trigger: true,\n\t\t\ttrigger_after_items: false,\n\t\t\t// trigger_icon_open: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path d=\"M50 79.53L2.5 32.03l11.56-11.56L50 56.41l35.94-35.94L97.5 32.03z\"/></svg>',\n\t\t\t// trigger_icon_close: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path d=\"M1.004 89.605l88.6-88.6 9.397 9.397-88.6 88.6z\"/><path d=\"M1.004 10.394L10.402.997l88.6 88.6-9.398 9.397z\"/></svg>',\n\t\t\ttrigger_icon_open: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\"><path d=\"M24 28.82l.75-.65 8.4-7.27-1.49-1.72L24 25.81l-7.66-6.63-1.49 1.72 8.4 7.27.75.65z\"/></svg>',\n\t\t\ttrigger_icon_close: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\"><path d=\"M34.53 34.4l-.09.1a1.11 1.11 0 01-1.82 0L24 25.93l-8.57 8.57a1.1 1.1 0 01-1.82 0l-.14-.1a1.11 1.11 0 010-1.82L22.09 24l-8.57-8.6a1.09 1.09 0 010-1.82l.09-.1a1.12 1.12 0 011.82 0L24 22.05l8.57-8.57a1.12 1.12 0 011.82 0l.09.1a1.11 1.11 0 010 1.82L25.92 24l8.61 8.61a1.12 1.12 0 010 1.79z\"/></svg>',\n\t\t}\n\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tthis.sectionsEl = document.querySelectorAll(this.settings.section_class + '[' + this.settings.section_title + ']'); // Seulement les sections qui ont un titre defined.\n\n\t\tthis.build_html();\n\t\tthis.click_on_quicknav_event();\n\t\tthis.toggle_quicknav_classes();\n\t\tthis.click_on_trigger_event();\n\t\tthis.close_on_scroll();\n\t\tthis.toggle_hide_quicknav();\n\n\t\t// Tout est fait, init quicknav\n\t\tthis.quicknavEl.classList.add(\"isInit\");\n\t}\n\n\n\t/**\n\t * Creates the HTML and add it to the DOM.\n\t */\n\tbuild_html() {\n\n\t\t/**\n\t\t * CHECK\n\t\t * Check if the HTML was harcoded, if yes : don't create it again.\n\t\t */\n\t\tconst itemsCheck = this.quicknavEl.querySelector('.quickNav__items');\n\t\tif (typeof (itemsCheck) != 'undefined' && itemsCheck != null) {\n\t\t\treturn;\n\t\t}\n\n\n\t\t/**\n\t\t * WRAP\n\t\t * Wrap everything in a __in div.\n\t\t */\n\t\tlet quicknavInEl = document.createElement(\"div\");\n\t\tquicknavInEl.classList.add(\"quickNav__in\");\n\n\n\t\t/**\n\t\t * ADD ITEMS\n\t\t * Add all the items in the quicknav.\n\t\t */\n\t\tlet itemsEl = document.createElement(\"div\");\n\t\titemsEl.classList.add('quickNav__items', 'jsQuickNav__ctn');\n\n\t\tthis.sectionsEl.forEach((sectionEl, index) => {\n\t\t\tconst title = sectionEl.getAttribute(this.settings.section_title);\n\n\t\t\t// <a>\n\t\t\tlet itemEl = document.createElement(\"a\");\n\t\t\titemEl.classList.add(\"quickNav__item\");\n\t\t\titemEl.href = \"#\";\n\n\t\t\t// <span> inside of the <a>\n\t\t\tlet spanEl = document.createElement(\"span\");\n\t\t\tspanEl.classList.add(\"quickNav__text\");\n\t\t\tspanEl.textContent = title;\n\n\t\t\t// Link the item to the section, for easy access later\n\t\t\titemEl.setAttribute(\"data-quicknav-index\", index);\n\t\t\tsectionEl.setAttribute(\"data-quicknav-index\", index);\n\n\t\t\titemEl.appendChild(spanEl);\n\t\t\titemsEl.appendChild(itemEl);\n\t\t});\n\n\t\tquicknavInEl.appendChild(itemsEl);\n\n\n\t\t/**\n\t\t * TRIGGER\n\t\t * Trigger to open / close quicknav\n\t\t */\n\t\tif (this.settings.add_trigger === true) {\n\t\t\tlet buttonEl = document.createElement(\"button\");\n\t\t\tbuttonEl.type = \"button\";\n\t\t\tbuttonEl.classList.add(\"quickNav__trigger\", \"jsQuickNav__trigger\");\n\n\t\t\tlet buttonLabel = document.createElement(\"span\");\n\t\t\tbuttonLabel.classList.add(\"quickNav__triggerLabel\", \"jsQuickNav__triggerLabel\");\n\n\t\t\tlet buttonIcons = document.createElement(\"span\");\n\t\t\tbuttonIcons.classList.add(\"quickNav__triggerIcon\");\n\n\t\t\tlet buttonIconOpen = document.createElement(\"span\");\n\t\t\tbuttonIconOpen.classList.add(\"svgIcon\", \"quickNav__triggerOpen\");\n\t\t\tbuttonIconOpen.innerHTML = this.settings.trigger_icon_open;\n\n\t\t\tlet buttonIconClose = document.createElement(\"span\");\n\t\t\tbuttonIconClose.classList.add(\"svgIcon\", \"quickNav__triggerClose\");\n\t\t\tbuttonIconClose.innerHTML = this.settings.trigger_icon_close;\n\n\t\t\tbuttonIcons.appendChild(buttonIconOpen);\n\t\t\tbuttonIcons.appendChild(buttonIconClose);\n\t\t\tbuttonEl.appendChild(buttonLabel);\n\t\t\tbuttonEl.appendChild(buttonIcons);\n\n\t\t\t// Avant ou apres la liste d'items\n\t\t\tif (this.settings.trigger_after_items) {\n\t\t\t\tquicknavInEl.appendChild(buttonEl);\n\t\t\t} else {\n\t\t\t\tquicknavInEl.insertBefore(buttonEl, quicknavInEl.firstChild);\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t * ADD TO DOM\n\t\t * Add all those elements to the quicknav.\n\t\t */\n\t\tthis.quicknavEl.appendChild(quicknavInEl);\n\n\n\t\t/**\n\t\t * VAR REFERENCE\n\t\t * For easy access later on...\n\t\t */\n\t\tthis.linksEL = this.quicknavEl.querySelectorAll(\"a\");\n\n\n\t\t/**\n\t\t * DEFAULT LABEL\n\t\t * On met le nom de la premiere section dans le trigger label.\n\t\t */\n\n\t\tthis.set_trigger_label(this.sectionsEl[0]);\n\t}\n\n\n\t/**\n\t * Click on the trigger button.\n\t * Open and close the quicknav.\n\t */\n\tclick_on_trigger_event() {\n\t\tif (this.settings.add_trigger !== true) { return; }\n\n\t\tconst triggerEl = this.quicknavEl.querySelector(\".jsQuickNav__trigger\");\n\n\t\ttriggerEl.addEventListener(\"click\", (evt) => {\n\t\t\tevt.preventDefault();\n\n\t\t\tif (this.quicknavEl.classList.contains(\"open\")) {\n\t\t\t\tthis.close_quicknav();\n\t\t\t} else {\n\t\t\t\tthis.open_quicknav();\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/**\n\t * Update the trigger label\n\t * Mettre le nom de la section active dans le trigger button.\n\t */\n\tset_trigger_label(sectionEl) {\n\t\tif (this.settings.add_trigger !== true) { return; }\n\n\t\tconst\n\t\t\tsectionName = sectionEl.getAttribute(\"data-quicknav-title\"),\n\t\t\ttriggerLabelEl = this.quicknavEl.querySelector(\".jsQuickNav__triggerLabel\");\n\n\t\ttriggerLabelEl.textContent = sectionName;\n\t}\n\n\n\t/**\n\t * Close the quicknav on scroll\n\t */\n\tclose_on_scroll() {\n\t\tif (this.settings.add_trigger !== true) { return; }\n\n\t\twindow.addEventListener('scroll', _.throttle(() => {\n\t\t\tif (this.quicknavEl.classList.contains(\"open\")) {\n\t\t\t\tthis.close_quicknav();\n\t\t\t}\n\t\t}, 300));\n\t}\n\n\n\t/**\n\t * Open the quicknav\n\t */\n\topen_quicknav() {\n\t\tthis.quicknavEl.classList.add('open');\n\t}\n\n\n\t/**\n\t * Close the quicknav\n\t */\n\tclose_quicknav() {\n\t\tthis.quicknavEl.classList.remove('open');\n\t}\n\n\n\t/**\n\t * Click on the quicknav link.\n\t * When there's a click, the page scrolls to the chosen section.\n\t */\n\tclick_on_quicknav_event() {\n\t\tthis.quicknavEl.addEventListener(\"click\", (evt) => {\n\t\t\t// On cible seulement les liens <a>\n\t\t\t// ATTENTION! closest bubbles up jusqu'au document.\n\t\t\tconst linkEl = evt.target.closest(\"a.quickNav__item\");\n\t\t\tif (!linkEl) { return };\n\t\t\tevt.preventDefault();\n\n\n\t\t\tconst section_index = linkEl.getAttribute(\"data-quicknav-index\");\n\t\t\tconst sectionEl = this.find_section_by_index(section_index);\n\n\t\t\tif (sectionEl != null) {\n\t\t\t\tthis.go_to_section(sectionEl);\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/**\n\t * Trouver une section par index de section (data-quicknav-index).\n\t */\n\tfind_section_by_index(searchIndex) {\n\t\tlet sectionFound = null;\n\n\t\tthis.sectionsEl.forEach((sectionEl) => {\n\t\t\tconst sectionIndex = sectionEl.getAttribute(\"data-quicknav-index\");\n\n\t\t\tif (sectionIndex == searchIndex) {\n\t\t\t\tsectionFound = sectionEl;\n\t\t\t}\n\t\t});\n\n\t\treturn sectionFound;\n\t}\n\n\n\t/**\n\t * Trouver un lien par index de section (data-quicknav-index).\n\t */\n\tfind_link_by_index(searchIndex) {\n\t\tlet linkFound = null;\n\n\t\tthis.linksEL.forEach((linkEl) => {\n\t\t\tconst sectionIndex = linkEl.getAttribute(\"data-quicknav-index\");\n\n\t\t\tif (sectionIndex == searchIndex) {\n\t\t\t\tlinkFound = linkEl;\n\t\t\t}\n\t\t});\n\n\t\treturn linkFound;\n\t}\n\n\n\t/**\n\t * Scroll to section\n\t * Centralise le code qui permet de scroller vers une section.\n\t */\n\tgo_to_section(sectionEl) {\n\t\tconst y = sectionEl.getBoundingClientRect().top + window.pageYOffset + this.settings.scroll_offset;\n\t\twindow.scrollTo({ top: y, behavior: 'smooth' });\n\n\t\t// Un jour, utiliser ceci?\n\t\t// sectionEl.scrollIntoView({\n\t\t// \tbehavior: 'smooth', // Defines the transition animation. default: auto\n\t\t// \tblock: 'center', // Defines vertical alignment. default: start\n\t\t// \tinline: 'nearest' // Defines horizontal alignment. default: nearest\n\t\t// });\n\t}\n\n\n\n\t/**\n\t * Gerer l'activation automatique des classes \"active\" sur les items.\n\t * Quand le user scroll, on indique sur quelle section on se trouve.\n\t */\n\ttoggle_quicknav_classes() {\n\t\tthis.sectionsEl.forEach((sectionEl) => {\n\t\t\tconst\n\t\t\t\tsectionIndex = sectionEl.getAttribute(\"data-quicknav-index\"),\n\t\t\t\tlinkEl = this.find_link_by_index(sectionIndex);\n\n\n\t\t\tScrollTrigger.create({\n\t\t\t\ttrigger: sectionEl,\n\n\t\t\t\t// Describes a place on the trigger and a place on the scroller \n\t\t\t\t// that must meet in order to start the ScrollTrigger.\n\t\t\t\t// Example:\n\t\t\t\t// \"top center\" = \"when the top of the trigger hits the center of the scroller\"\n\t\t\t\t// \"bottom 80%\" = \"when the bottom of the trigger hits 80% down from the top of the viewport\" \n\t\t\t\tstart: \"top center\",\n\t\t\t\tend: \"bottom center\",\n\n\t\t\t\t// Gestion custom des events\n\t\t\t\tonEnter: () => {\n\t\t\t\t\tlinkEl.classList.add(\"active\");\n\t\t\t\t\tthis.set_trigger_label(sectionEl);\n\t\t\t\t},\n\t\t\t\tonLeave: () => {\n\t\t\t\t\tlinkEl.classList.remove(\"active\")\n\t\t\t\t},\n\t\t\t\tonEnterBack: () => {\n\t\t\t\t\tlinkEl.classList.add(\"active\")\n\t\t\t\t\tthis.set_trigger_label(sectionEl);\n\t\t\t\t},\n\t\t\t\tonLeaveBack: () => {\n\t\t\t\t\tlinkEl.classList.remove(\"active\")\n\t\t\t\t},\n\n\t\t\t\t// markers: true,\n\t\t\t\t// id: \"section \" + sectionIndex,\n\t\t\t});\n\t\t});\n\t}\n\n\n\t/**\n\t * Hide the quicknav\n\t * When the window reach a section, hide the quicknav.\n\t * Usually, this section is the footer.\n\t */\n\ttoggle_hide_quicknav() {\n\t\tconst hideHereEl = document.querySelector(this.settings.section_class_hide);\n\t\tif (!hideHereEl) { return; }\n\n\n\t\tScrollTrigger.create({\n\t\t\ttrigger: hideHereEl,\n\t\t\ttoggleClass: { targets: this.quicknavEl, className: \"quickNav--hide\" },\n\n\t\t\t// Describes a place on the trigger and a place on the scroller \n\t\t\t// that must meet in order to start the ScrollTrigger.\n\t\t\t// Example:\n\t\t\t// \"top center\" = \"when the top of the trigger hits the center of the scroller\"\n\t\t\t// \"bottom 80%\" = \"when the bottom of the trigger hits 80% down from the top of the viewport\" \n\t\t\tstart: \"top 25%\",\n\n\t\t\t// Ce code permet de ne pas avoir de fin au ScrollTrigger\n\t\t\tendTrigger: \"html\",\n\t\t\tend: \"bottom top\",\n\n\t\t\t// markers: true,\n\t\t\t// id: \"hide quicknav\",\n\t\t});\n\t}\n}"],"file":"fbquicknav.js"}