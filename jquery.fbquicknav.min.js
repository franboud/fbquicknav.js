(function(n){n.fn.fbquicknav=function(i){function t(i,t){var a=n("<div>",{class:"quicknav__items js-quicknav-cont"});if(t.each(function(i,t){var c=n(this),e=c.attr(d.section_title),o=n("<a>",{href:"#",class:"quicknav__item",html:n("<span>",{class:"quicknav__text",text:e})});o.attr("data-quicknav-index",i),c.attr("data-quicknav-index",i),a.append(o)}),i.append(a),d.add_trigger===!0){var c=' <button type="button" class="btn-icon btn-icon--same-as-menu-main quicknav__trigger js-quicknav-trigger"><svg class="icon quicknav__triggeropen"><use xlink:href="#icon-main-menu" /></svg><svg class="icon quicknav__triggerclose"><use xlink:href="#icon-close" /></svg></button>';i.append(c)}}function a(i){if(d.add_trigger===!0){var t=n(".js-quicknav-trigger",i),a=(n(".quicknav__item",i),n(".js-quicknav-cont",i));t.on("click",function(t){n(this);a.hasClass("on")?o(i):e(i),t.preventDefault()})}}function c(i){d.add_trigger===!0&&n(window).on("scroll",function(){k&&o(i)})}function e(i){var t=n(".js-quicknav-trigger",i),a=n(".js-quicknav-cont",i);a.addClass("on"),t.addClass("on"),k=!0}function o(i){var t=n(".js-quicknav-trigger",i),a=n(".js-quicknav-cont",i);a.removeClass("on"),t.removeClass("on"),k=!1}function r(i,t){i.on("click","a",function(i){i.preventDefault();var a=n(this),c=a.attr("data-quicknav-index"),e=t.filter("[data-quicknav-index='"+c+"']");n.scrollTo(e,{offset:d.scroll_offset,duration:d.scroll_duration})})}function s(i,t){var a=new ScrollMagic.Controller;t.each(function(t,c){var e=n(c),o=e.attr("data-quicknav-index"),r=n("a[data-quicknav-index='"+o+"']",i),s=r[0],u=new ScrollMagic.Scene({triggerElement:c,triggerHook:.5,duration:g[o]}).setClassToggle(s,"active").addTo(a);f[o]=u})}function u(i){var t=n(d.section_class_hide);if(0!==t.length){var a=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerElement:t[0],triggerHook:.7}).setClassToggle(i[0],"quicknav--hide").addTo(a)}}function l(i){i.each(function(i,t){var a=n(t).outerHeight(!0);g[i]=a})}function v(n){n.each(function(n,i){f[n].duration(g[n])})}var d=n.extend({section_class:".js-quicknav-section",section_class_hide:".js-quicknav-hide",section_title:"data-quicknav-title",scroll_offset:-100,scroll_duration:500,add_trigger:!1},i),g=[],f=[],k=!1;return this.each(function(){var i=n(this),e=n(d.section_class);t(i,e),a(i),c(i),r(i,e),l(e),s(i,e),u(i),n(window).on("resize",function(){l(e),v(e)})})}})(jQuery);