(function(a){a.fn.fbquicknav=function(t){function i(t,i){var e=a(".quickNav__items",t);if(!(e.length>0)){e=a("<div>",{class:"quickNav__items jsQuickNav__ctn"}),i.each(function(t,i){var n=a(i),c=n.attr(f.section_title),r=a("<a>",{href:"#",class:"quickNav__item",html:a('<span class="quickNav__text">'+c+"</span>")});r.attr("data-quicknav-index",t),n.attr("data-quicknav-index",t),n.data("titre",c),e.append(r)});var n=t.attr("data-quicknav-main-title");if(void 0!==n){var c=a("<div>",{class:"quickNav__carrieres",html:n});t.append(c)}if(t.append(e),!0===f.add_trigger){var r=' <button type="button" class="quickNav__trigger jsQuickNav__trigger"> <span class="quickNav__triggerLabel jsQuickNav__triggerLabel"> </span> <span class="quickNav__triggerIcon"> <span class="svgIcon quickNav__triggerOpen">'+f.trigger_icon_open+'</span> <span class="svgIcon quickNav__triggerClose">'+f.trigger_icon_close+"</span> </span> </button>";f.trigger_after_items?t.append(r):t.prepend(r),l(t,a(i[0]))}t.wrapInner('<div class="quickNav__in"></div>')}}function e(t){if(!0===f.add_trigger){var i=a(".jsQuickNav__trigger",t);a(".quickNav__item",t),a(".jsQuickNav__ctn",t);i.on("click",function(a){t.hasClass("open")?r(t):c(t),a.preventDefault()})}}function n(t){!0===f.add_trigger&&a(window).on("scroll",function(){p&&r(t)})}function c(a){a.addClass("open"),p=!0}function r(a){a.removeClass("open"),p=!1}function s(t,i){t.on("click","a",function(t){t.preventDefault();var e=a(this),n=e.attr("data-quicknav-index"),c=i.filter("[data-quicknav-index='"+n+"']");o(c)})}function o(t){a.scrollTo(t,{offset:f.scroll_offset,duration:f.scroll_duration})}function l(t,i){if(!0===f.add_trigger){var e=a(".jsQuickNav__triggerLabel",t),n=i.data("titre");e.html(n)}}function v(t,i){var e=new ScrollMagic.Controller,n=a("a",t);i.each(function(i,c){var r=a(c),s=r.attr("data-quicknav-index"),o=r.attr("data-quicknav-on-dark"),v=r.attr("data-quicknav-main-title-show"),d=a("a[data-quicknav-index='"+s+"']",t);if(o=void 0!==o,v=void 0!==v,1==f.calculate_heights)var u=new ScrollMagic.Scene({triggerElement:c,triggerHook:.5,duration:k[s]}).on("enter",function(){r.data("active",1),d.addClass("active"),o&&t.addClass("onDarkSection"),v&&t.addClass("showTitleSection"),l(t,r)}).on("leave",function(){r.data("active",0),d.removeClass("active"),o&&t.removeClass("onDarkSection"),v&&t.removeClass("showTitleSection")}).addTo(e);else{u=new ScrollMagic.Scene;u.triggerElement(c).triggerHook(.5).on("start",function(i){if("FORWARD"==i.scrollDirection)n.removeClass("active"),d.addClass("active");else{n.removeClass("active");var e=s-1,c=a("a[data-quicknav-index='"+e+"']",t);c.addClass("active")}}).addTo(e)}h[s]=u})}function d(t){var i=a(f.section_class_hide);if(0!==i.length){var e=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerElement:i[0],triggerHook:.7}).setClassToggle(t[0],"quickNav--hide").addTo(e)}}function u(t){!0===f.calculate_heights&&t.each(function(t,i){var e=a(i).outerHeight(!0);k[t]=e})}function g(a){a.each(function(a,t){h[a].duration(k[a])})}var f=a.extend({section_class:".jsQuickNav__section",section_class_hide:".jsQuickNav__hide",section_title:"data-quicknav-title",scroll_offset:-100,scroll_duration:500,calculate_heights:!0,add_trigger:!1,trigger_after_items:!1,trigger_icon_open:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50 79.53L2.5 32.03l11.56-11.56L50 56.41l35.94-35.94L97.5 32.03z"/></svg>',trigger_icon_close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M1.004 89.605l88.6-88.6 9.397 9.397-88.6 88.6z"/><path d="M1.004 10.394L10.402.997l88.6 88.6-9.398 9.397z"/></svg>'},t),k=[],h=[],p=!1;return this.each(function(){var t=a(this),c=a(f.section_class+"["+f.section_title+"]");i(t,c),e(t),n(t),s(t,c),u(c),v(t,c),d(t),1==f.calculate_heights&&window.addEventListener("resize",_.debounce(function(){u(c),g(c)},300)),t.addClass("isInit")})}})(jQuery);