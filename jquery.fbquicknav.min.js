(function(a){a.fn.fbquicknav=function(n){function i(n,i){var t=a("<div>",{class:"quicknav__items jsQuicknav__ctn"});i.each(function(n,i){var e=a(this),c=e.attr(g.section_title),o=a("<a>",{href:"#",class:"quicknav__item",html:a('<span class="quicknav__text">'+c+"</span>")});o.attr("data-quicknav-index",n),e.attr("data-quicknav-index",n),t.append(o)});var e=n.attr("data-quicknav-main-title");if(void 0!==e){var c=a("<div>",{class:"quicknav__carrieres",html:e});n.append(c)}if(n.append(t),!0===g.add_trigger){var o=' <button type="button" class="btn-icon quicknav__trigger jsQuicknav__trigger"><svg class="icon quicknav__triggeropen"><use xlink:href="#icon-main-menu" /></svg><svg class="icon quicknav__triggerclose"><use xlink:href="#icon-close" /></svg></button>';n.append(o)}}function t(n){if(!0===g.add_trigger){var i=a(".jsQuicknav__trigger",n),t=(a(".quicknav__item",n),a(".jsQuicknav__ctn",n));i.on("click",function(i){a(this);t.hasClass("on")?o(n):c(n),i.preventDefault()})}}function e(n){!0===g.add_trigger&&a(window).on("scroll",function(){h&&o(n)})}function c(n){var i=a(".jsQuicknav__trigger",n),t=a(".jsQuicknav__ctn",n);t.addClass("on"),i.addClass("on"),h=!0}function o(n){var i=a(".jsQuicknav__trigger",n),t=a(".jsQuicknav__ctn",n);t.removeClass("on"),i.removeClass("on"),h=!1}function s(n,i){n.on("click","a",function(n){n.preventDefault();var t=a(this),e=t.attr("data-quicknav-index"),c=i.filter("[data-quicknav-index='"+e+"']");r(c)})}function r(n){a.scrollTo(n,{offset:g.scroll_offset,duration:g.scroll_duration})}function l(n,i){var t=new ScrollMagic.Controller,e=a("a",n);i.each(function(i,c){var o=a(c),s=o.attr("data-quicknav-index"),r=o.attr("data-quicknav-on-dark"),l=o.attr("data-quicknav-main-title-show"),u=a("a[data-quicknav-index='"+s+"']",n);if(r=void 0!==r,l=void 0!==l,1==g.calculate_heights)var v=new ScrollMagic.Scene({triggerElement:c,triggerHook:.5,duration:f[s]}).on("enter leave",function(){u.toggleClass("active"),r&&n.toggleClass("onDarkSection"),l&&n.toggleClass("showTitleSection")}).addTo(t);else{v=new ScrollMagic.Scene;v.triggerElement(c).triggerHook(.5).on("start",function(i){if("FORWARD"==i.scrollDirection)e.removeClass("active"),u.addClass("active");else{e.removeClass("active");var t=s-1,c=a("a[data-quicknav-index='"+t+"']",n);c.addClass("active")}}).addTo(t)}k[s]=v})}function u(n){var i=a(g.section_class_hide);if(0!==i.length){var t=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerElement:i[0],triggerHook:.7}).setClassToggle(n[0],"quicknav--hide").addTo(t)}}function v(n){!0===g.calculate_heights&&n.each(function(n,i){var t=a(i).outerHeight(!0);f[n]=t})}function d(a){a.each(function(a,n){k[a].duration(f[a])})}var g=a.extend({section_class:".jsQuicknav__section",section_class_hide:".jsQuicknav__hide",section_title:"data-quicknav-title",scroll_offset:-100,scroll_duration:500,add_trigger:!1,calculate_heights:!1},n),f=[],k=[],h=!1;return this.each(function(){var n=a(this),c=a(g.section_class);i(n,c),t(n),e(n),s(n,c),v(c),l(n,c),u(n),1==g.calculate_heights&&window.addEventListener("resize",_.debounce(function(){v(c),d(c)},300)),n.addClass("isInit")})}})(jQuery);